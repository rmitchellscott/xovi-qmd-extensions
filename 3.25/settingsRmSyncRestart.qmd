; Mitchell Scott (https://github.com/rmitchellscott)
; SPDX-License-Identifier: MIT
; Modified: 2026-02-09T14:02:30Z

AFFECT [[7007493800782575209]]
    IMPORT net.asivery.CommandExecutor [[180922.180921]]

    TRAVERSE ?#[[6504254477]] > ?#[[254529542087036966]] > ?#[[486471031355863065]] > [[14125623155555875541]]

        LOCATE AFTER [[425121728314878811.214599571833]]#[[254548385864165622]]
        INSERT {
            ~&425121728314878811&~.~&214599571833&~ {
                ~&5972374&~: rmSyncPanel

                property bool showResult: ~&214625660372&~

                ~&7081629735527&~.~&254529418434902000&~: ~&6504329801&~
                ~&214632764553&~: ~&6504222003&~("Sync service")
                ~&478136262235079021&~: ~&6504222003&~("Restarts the rm-sync service if sync appears stuck.")
                ~&9195823055201242195&~: rmSyncPanel.showResult

                CommandExecutor {
                    ~&5972374&~: rmSyncExecutor
                }

                ~&428051690305612204&~ {
                    ~&7083194890448&~: ~&6504254477&~
                    function ~&13733777459642361598&~() {
                        rmSyncPanel.showResult = ~&214625660372&~;
                    }
                }

                ~&7082453764199&~: ~&425121728314878811&~.~&7081261925573&~ {
                    ~&6504337259&~: ~&254477762679831355&~.~&7081261925573&~.~&254547519794454865&~
                    ~&6504315758&~: ~&6504222003&~("Restart sync")
                    ~&254542236275632405&~: {
                        ~&214622607920&~ { stdout, stderr } = rmSyncExecutor.executeCommand("/usr/bin/bash", ["-c", "systemctl restart rm-sync"]);
                        ~&233724020023100&~.~&197092075&~("Restarting rm-sync");
                        rmSyncPanel.showResult = ~&6504329801&~;
                    }
                }

                ~&8399254548634699250&~: ~&425121728314878811&~.~&437183513164491482&~ {
                    ~&6504337259&~: ~&254477762679831355&~.~&437183513164491482&~.~&233740920352621&~
                    ~&233736549263054&~: ~&6504222003&~("Sync service restarted")
                    ~&8399601734642709923&~: ~&"16588797428236211658&~
                    ~&214646099849&~: rmSyncPanel.~&214646099849&~
                }
            }
        }

    END TRAVERSE

END AFFECT
