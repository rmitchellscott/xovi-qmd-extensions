; Mitchell Scott (https://github.com/rmitchellscott)
; SPDX-License-Identifier: MIT
; Modified: 2026-02-25T00:13:01Z
; Requires: bettertoc.qmd

AFFECT [[3197972396468700595]]
	TRAVERSE ?#[[10742505294233322867]]
	LOCATE BEFORE [[197082485]]
	INSERT {
		signal addToToc
	}
	END TRAVERSE
	TRAVERSE ?#[[214642769434]]
		LOCATE BEFORE [[425121728314878811.16765000136167945189.7081261925573]]#[[3012293087768835154]]
		INSERT {
			~&425121728314878811&~.~&16765000136167945189&~.~&7081261925573&~ {
				~&5972374&~: addToToc
				~&481641799955318521&~: ~&5971598&~.~&233696851602406&~
				~&6504337259&~: ~&214642769434&~.~&6504337259&~
				~&8399601734642709923&~: ~&"15094524446771854124&~
				~&254542236275632405&~: ~&10742505294233322867&~.addToToc()
			}
		}
	END TRAVERSE
END AFFECT
AFFECT [[11806562588218124596]]
TRAVERSE ?#[[18399528329672988301]]
LOCATE AFTER ALL
INSERT {
onAddToToc: {
	~&6504254477&~.~&7282468819357443632&~(function () {
		~&11077763042784530127&~.addToTocFrom(~&8399340108982949229&~.~&5308518110917893541&~(~&8399340108982949229&~.~&15752433948179392809&~, ~&6504254477&~.~&15777890623490054006&~));
		~&6504254477&~.~&12148339614529610933&~();
	});
}
}
END TRAVERSE
END AFFECT
AFFECT [[15977735761668523171]]
TRAVERSE ?#[[6504254477]]
LOCATE BEFORE ALL
REBUILD [[8399947697665748998]]
LOCATE BEFORE ALL
INSERT { !addingToToc && }
END REBUILD
LOCATE BEFORE [[233724020120234]]
INSERT {
	property bool addingToToc: ~&214625660372&~
	function addToTocFrom(~&214629893131&~) {
		addingToToc = ~&6504329801&~;
		~&8398536573969953217&~.startSelectionToolJob(~&214629893131&~, ~&7712198086779994&~.~&5671208228825160146&~);
	}

}
END TRAVERSE
TRAVERSE ?#[[742117811095419965]]
REBUILD [[12940955005542131354]]
LOCATE AFTER STREAM / { /
INSERT {
~&5972376&~(addingToToc) {
	~&5972376&~(!~&7713012755563699&~) {
		~&7083121450889&~;
	}
	~&197102514&~ tocText = ~&3875029581909304837&~.plainText.replace(/\n/g, ~&"180905&~).~&6504329413&~();
	~&15793094956877902211&~.tocAddEntry(~&15793094956877902211&~.~&3321486226208410902&~, tocText);
	addingToToc = ~&214625660372&~;
	~&7083121450889&~;
}
}
END REBUILD
END TRAVERSE
END AFFECT
AFFECT [[2170432337220872387]]
TRAVERSE ?#[[10742505294233132260]]
LOCATE AFTER ALL
INSERT {
	~&425121728314878811&~.~&16765000136167945189&~.~&7081261925573&~ {
		~&5972374&~: glyphSelectionToToc
		~&481641799955318521&~: ~&5971598&~.~&233696851602406&~
		~&6504337259&~: ~&10742505294233132260&~.~&6504337259&~
		~&8399601734642709923&~: ~&"15094524446771854124&~
		~&254542236275632405&~: {
			~&197102514&~ tocText = ~&16536305558369206583&~.replace(/\n/g, ~&"180905&~).~&6504329413&~();
			~&15793094956877902211&~.tocAddEntry(~&15793094956877902211&~.~&3321486226208410902&~, tocText);
		}
	}
}
END TRAVERSE
END AFFECT
AFFECT [[3708437855669237819]]
TRAVERSE ?#[[738928733275563153]] > [[12395602925408354507]]
LOCATE AFTER [[16513464771895549213]]#[[496330270324752866]]
INSERT {
	property ~&197102514&~ tocClipboard: ~&254550717068498203&~
	property bool addingToToc: ~&214625660372&~

	~&16513464771895549213&~ {
		~&5972374&~: tocButton
		~&8399601734642709923&~: ~&"15094524446771854124&~
		~&233748328658231&~: ~&8399340108982949229&~.~&15974515710717949451&~
		~&7713561545874130&~: ~&214625660372&~
		~&254542236275632405&~: {
			tocClipboard = ~&254480318283987577&~.~&6504315758&~;
			~&8399340108982949229&~.~&10756366413375378098&~();
			addingToToc = ~&6504329801&~;
		}
	}
	~&428051690305612204&~ {
		~&7083194890448&~: ~&8399340108982949229&~

		function ~&16346808361226786719&~() {
			~&5972376&~(!addingToToc) ~&7083121450889&~;

			~&197102514&~ tocText = ~&254480318283987577&~.textString().replace(/\n/g, ~&"180905&~).~&6504329413&~();
			~&15793094956877902211&~.tocAddEntry(~&15793094956877902211&~.~&3321486226208410902&~, tocText);

			~&254480318283987577&~.~&6504315758&~ = tocClipboard;
			tocClipboard = ~&254550717068498203&~;
			addingToToc = ~&214625660372&~;
		}
	}
}
END TRAVERSE
END AFFECT
