; Mitchell Scott (https://github.com/rmitchellscott)
; SPDX-License-Identifier: MIT
; Modified: 2025-12-19T16:55:51Z

AFFECT [[1658694193319203921]]
    TRAVERSE [[6502786168]]
        LOCATE AFTER ALL INSERT {
            readonly property ~&7083178290016&~ tocFilePath: "file:///home/root/.local/share/remarkable/xochitl/%1/toc.json"

            function tocReadFile(~&6504167510&~, ~&7712874493159382&~) {
                ~&214622607920&~ req =    new    XMLHttpRequest();
                req.~&6504147419&~("GET", ~&6504167510&~);
                req.onreadystatechange = () => {
                    ~&5972376&~ (req.readyState === XMLHttpRequest.DONE) {
                        ~&7712874493159382&~(req.responseText ? ~&6502785411&~.parse(req.responseText) : ~&6504117156&~);
                    }
                };
                req.~&6504279475&~();
            }

            function tocWriteFile(~&6504167510&~, ~&197094916&~) {
                ~&214622607920&~ req =    new    XMLHttpRequest();
                req.~&6504147419&~("PUT", ~&6504167510&~);
                req.~&6504279475&~(~&6502785411&~.~&254548178208422824&~(~&197094916&~));
            }
        }
    END TRAVERSE
END AFFECT

AFFECT [[1224665461898798997]]
    TRAVERSE [[8397993708429497603]]
        LOCATE BEFORE ALL
        INSERT {
            readonly property ~&197102514&~ ~&15793094956877902211&~: ~&6504254477&~

            property ~&197102514&~ tocEntries: ({})
            property bool tocLoading: ~&214625660372&~

            function tocLoadEntries() {
                tocLoading = ~&6504329801&~;
                tocEntries = ({});
                ~&5972376&~ (!~&7712934851008712&~ || ~&7712934851008712&~.~&7713012671454059&~ !== ~&7711571060833448&~.~&7711997891205770&~) {
                    tocLoading = ~&214625660372&~;
                    tocBuildModel();
                    ~&7083121450889&~;
                }

                ~&7082020628281&~.tocReadFile(~&7082020628281&~.tocFilePath.~&197080195&~(~&7712934851008712&~.~&5972374&~), (~&6503736259&~) => {
                    ~&214622607920&~ entries = ({});

                    ~&5972376&~ (!!~&6503736259&~) {
                        ~&197085552&~ (~&214622607920&~ [~&197090674&~, ~&197094916&~] ~&5972574&~ ~&7081747777088&~.entries(~&6503736259&~)) {
                            ~&197091758&~ ~&7083037950451&~ = ~&214629831714&~(~&7081731278802&~(~&197090674&~)) ? ~&197090674&~ : ~&7712934851008712&~.idForPage(~&197090674&~);
                            ~&5972376&~ (!~&7083037950451&~) ~&7712892661735406&~;
                            ~&5972376&~ (~&7712934851008712&~.pageForId(~&7083037950451&~) < 0) ~&7712892661735406&~;

                            entries[~&7083037950451&~] = { ~&6504095402&~: ~&197094916&~.~&6504095402&~ || "" };
                        }
                        tocEntries = entries;
                    }

                    tocLoading = ~&214625660372&~;
                    tocBuildModel();
                });
            }

            function tocSaveEntries() {
                ~&5972376&~ (!~&7712934851008712&~ || tocLoading || ~&7712934851008712&~.~&7713012671454059&~ !== ~&7711571060833448&~.~&7711997891205770&~) ~&7083121450889&~;
                ~&7082020628281&~.tocWriteFile(~&7082020628281&~.tocFilePath.~&197080195&~(~&7712934851008712&~.~&5972374&~), tocEntries);
            }

            function tocAddEntry(~&7083037950451&~, ~&6504095402&~) {
                tocEntries[~&7083037950451&~] = { ~&6504095402&~: ~&6504095402&~ || "" };
                tocEntriesChanged();
            }

            function tocDeleteEntry(~&7083037950451&~) {
                ~&5972376&~ (tocEntries[~&7083037950451&~]) {
                    ~&7082573250524&~ tocEntries[~&7083037950451&~];
                    tocEntriesChanged();
                }
            }

            function tocShowRenameDialog(~&7083037950451&~) {
                ~&197091758&~ ~&6504095402&~ = !!tocEntries[~&7083037950451&~] ? tocEntries[~&7083037950451&~].~&6504095402&~ : "";
                _tocRenamePopup.~&6504147419&~(~&7083037950451&~, ~&6504095402&~);
            }

            function tocRenameEntry(~&7083037950451&~, ~&6504095402&~) {
                tocEntries[~&7083037950451&~] = { ~&6504095402&~: ~&6504095402&~ };
                tocEntriesChanged();
            }

            function tocRevalidateEntries() {
                ~&7081747777088&~.~&6503992357&~(tocEntries).~&233727897502049&~((~&7083037950451&~) => {
                    ~&5972376&~ (~&7712934851008712&~.pageForId(~&7083037950451&~) < 0) {
                        ~&7082573250524&~ tocEntries[~&7083037950451&~];
                    }
                });
                tocEntriesChanged();
            }

            function tocBuildModel() {
                ~&5972376&~ (!~&7712934851008712&~ || ~&7712934851008712&~.~&7713012671454059&~ !== ~&7711571060833448&~.~&7711997891205770&~) {
                    ~&6504254477&~.~&7713616698729984&~ = [];
                    ~&7083121450889&~;
                }
                ~&197091758&~ entries = [];
                ~&197085552&~ (~&214622607920&~ [~&7083037950451&~, ~&6503736259&~] ~&5972574&~ ~&7081747777088&~.entries(tocEntries)) {
                    ~&214622607920&~ ~&6504167078&~ = ~&7712934851008712&~.pageForId(~&7083037950451&~);
                    ~&5972376&~ (~&6504167078&~ >= 0) {
                        entries.~&6504189257&~({
                            ~&6504167078&~: ~&6504167078&~,
                            ~&7083037950451&~: ~&7083037950451&~,
                            ~&6504095402&~: ~&6503736259&~.~&6504095402&~ || ("Page " + (~&6504167078&~ + 1)),
                            ~&214632930081&~: 0
                        });
                    }
                }
                entries.~&6504290513&~((~&180970&~, ~&180971&~) => ~&180970&~.~&6504167078&~ - ~&180971&~.~&6504167078&~);
                ~&6504254477&~.~&7713616698729984&~ = entries;
            }

            property ~&197102514&~ _savedTocScrollPosition: ~&6504117156&~

            function tocShowView() {
                ~&5972376&~ (~&254547437090201330&~ && ~&254547437090201330&~.~&502817364213021138&~) {
                    _savedTocScrollPosition = {
                        ~&7082534202858&~: ~&5971598&~.~&214638019283&~(~&254547437090201330&~.~&502817364213021138&~.~&7082534202858&~.~&180993&~, ~&254547437090201330&~.~&502817364213021138&~.~&7082534202858&~.~&180994&~),
                        ~&214641137009&~: ~&254547437090201330&~.~&502817364213021138&~.~&214641137009&~
                    };
                }
                ~&214637513689&~.~&233748328658231&~ = ~&6504329801&~;
                ~&214637513689&~.tocShowView(~&6504329801&~);
            }

            function tocRestoreScrollPosition() {
                ~&5972376&~ (_savedTocScrollPosition && ~&254547437090201330&~ && ~&254547437090201330&~.~&502817364213021138&~) {
                    ~&254547437090201330&~.~&502817364213021138&~.setFocalPoint(_savedTocScrollPosition.~&7082534202858&~, _savedTocScrollPosition.~&214641137009&~);
                    _savedTocScrollPosition = ~&6504117156&~;
                }
            }

            onTocEntriesChanged: {
                tocSaveEntries();
                tocBuildModel();
            }
        }

        TRAVERSE [[6502786168]]#[[15549782143769420265]]
            TRAVERSE [[233704648923420]]
                LOCATE BEFORE ALL INSERT {
                    onTocShowView: ~&15793094956877902211&~.tocShowView()
                    onTocAddEntry: (~&7083037950451&~) => {
                        ~&15793094956877902211&~.tocAddEntry(~&7083037950451&~, "");
                        ~&15793094956877902211&~.tocShowRenameDialog(~&7083037950451&~);
                    }
                    onTocAddCurrentEntry: {
                        ~&15793094956877902211&~.tocAddEntry(~&15793094956877902211&~.~&3321486226208410902&~, "");
                        ~&15793094956877902211&~.tocShowRenameDialog(~&15793094956877902211&~.~&3321486226208410902&~);
                    }
                }
            END TRAVERSE
        END TRAVERSE

        REPLACE [[13184053911240945935]] WITH {
            ~&13184053911240945935&~: {
                ~&5972376&~ (!!~&7712934851008712&~){
                    ~&15793094956877902211&~.~&2905125091891814744&~();
                    tocLoadEntries();
                }
            }
        }

        TRAVERSE [[428051690305612204]][.[[7083194890448]]=[[7712934851008712]]]
            ASSERT [[927074197512191160]]

            REBUILD [[927074197512191160]]
                LOCATE BEFORE ALL
                INSERT {
                    ~&5972376&~ (~&7712934851008712&~ && ~&7712934851008712&~.~&7713012671454059&~ === ~&7711571060833448&~.~&7711997891205770&~) ~&7083121450889&~;
                }
            END REBUILD

            REBUILD [[1576309469129240203]]
                LOCATE AFTER ALL
                INSERT { ~&15793094956877902211&~.tocRevalidateEntries(); }
            END REBUILD
        END TRAVERSE

        LOCATE AFTER ALL
        INSERT {
            ~&214600077661&~ {
                ~&5972374&~: _tocRenamePopup
                property ~&7083178290016&~ ~&7083037950451&~
                ~&214646099849&~: ~&15549782143769420265&~.~&214646099849&~
                ~&233739780873643&~: ~&14839296689095546654&~

                ~&2122835675838176157&~: _tocRenameInput.~&2122835675838176157&~
                ~&17012884421348371483&~: ~&214600077661&~.~&8398624284572419691&~.~&11039320312232865459&~
                ~&11412860438186802733&~: ~&6504329801&~

                function ~&6504147419&~(pId, ~&6504095402&~) {
                    _tocRenamePopup.~&7083037950451&~ = pId;
                    _tocRenameInput.~&6504315758&~ = ~&6504095402&~ || "";
                    ~&254547663425316670&~();
                }

                ~&13733777459642361598&~: {
                    ~&5972376&~ (~&233748328658231&~) _tocRenameInput.~&8399617258038629437&~.~&9186019576827190292&~();
                }

                ~&435226761427665314&~ {
                    ~&5972374&~: _tocRenameInput
                    ~&496814758264239564&~: ~&6504222003&~("Enter entry name")
                    ~&15687297754887797348&~: ~&214625660372&~
                    ~&8399617258038629437&~.~&16881952377443810710&~: ~&7082020628281&~.~&8399340017235344933&~
                    ~&8399617258038629437&~.~&4014537309200381774&~: ~&7082020628281&~.~&8399340017260114793&~
                    ~&8399617258038629437&~.~&551578482712369929&~: 50
                    ~&214626153769&~: ~&6504329801&~
                    ~&233748328658231&~: ~&6504329801&~
                    ~&477061882630366844&~: ~&6504222003&~(~&"6503125400&~)

                    ~&8399893700003527327&~: (~&6504315758&~) => {
                        ~&5972376&~ (~&6504315758&~.~&7082886407723&~) ~&15793094956877902211&~.tocRenameEntry(_tocRenamePopup.~&7083037950451&~, ~&6504315758&~.~&6504329413&~());
                        _tocRenamePopup.~&254532220638374263&~();
                    }

                    ~&8399894427373474444&~: _tocRenamePopup.~&254532220638374263&~()
                }
            }
        }
    END TRAVERSE
END AFFECT

AFFECT [[4530443761526121003]]
    TRAVERSE [[8397788359424131273]]
        LOCATE BEFORE ALL
        INSERT {
            property bool tocFromToolbar: ~&214625660372&~

            function tocShowView(fromToolbar) {
                tocFromToolbar = fromToolbar || ~&214625660372&~;
                ~&13155146558357480555&~.~&7082453764421&~ = ~&6504329801&~;
            }

            function tocHandleRejected() {
                ~&5972376&~ (tocFromToolbar) {
                    tocFromToolbar = ~&214625660372&~;
                    ~&13155146558357480555&~.~&7082453764421&~ = ~&214625660372&~;
                    ~&214637513689&~.~&233748328658231&~ = ~&214625660372&~;
                    ~&15793094956877902211&~.tocRestoreScrollPosition();
                } ~&6503784146&~ {
                    ~&13155146558357480555&~.~&7082453764421&~ = ~&214625660372&~;
                }
            }
        }

        LOCATE AFTER [[7081645463424]]#[[13155146558357480555]]
        INSERT {
            ~&428051690305612204&~ {
                ~&7083194890448&~: ~&13155146558357480555&~.~&6503936152&~
                function ~&8399894427373474444&~() {
                    ~&214637513689&~.tocHandleRejected();
                }
                function onTocDeleteEntry(~&7083037950451&~) {
                    ~&15793094956877902211&~.tocDeleteEntry(~&7083037950451&~);
                }
                function onTocRenameEntry(~&7083037950451&~, ~&6504095402&~) {
                    ~&15793094956877902211&~.tocRenameEntry(~&7083037950451&~, ~&6504095402&~);
                }
            }

            ~&233681166222244&~ {
                ~&7083194890448&~: ~&13155146558357480555&~.~&6503936152&~
                property: ~&"8399622833342374598&~
                ~&214644635174&~: ~&15793094956877902211&~.~&7712934851008712&~ && ~&15793094956877902211&~.~&7712934851008712&~.~&7713012671454059&~ === ~&7711571060833448&~.~&7711997891205770&~
                ~&6504426203&~: ~&13155146558357480555&~.~&7082453764421&~
            }

            ~&233681166222244&~ {
                ~&7083194890448&~: ~&2418927073359434988&~
                property: ~&"233748328658231&~
                ~&214644635174&~: !~&496312708941723703&~.~&233748328658231&~ && !~&4550470176672569638&~.~&7082453764421&~ && !~&13155146558357480555&~.~&7082453764421&~
            }
        }
    END TRAVERSE
END AFFECT

AFFECT [[6554413872610298131]]
    IMPORT [[233700934949963.233693781272506]] [[180922.180921]]
    IMPORT [[6504469795.6504031891.7712892662059645]] [[180922.180921]]
    IMPORT [[197080199.7083211239901]] [[180922.180921]]
    TRAVERSE [[8397788359424131273]]#[[15225781669996973588]]
        LOCATE BEFORE ALL
        INSERT {
            property bool ~&8399622833342374598&~: ~&214625660372&~
            property ~&7083178290016&~ editingPageId: ""

            signal tocDeleteEntry(~&7083178290016&~ ~&7083037950451&~)
            signal tocRenameEntry(~&7083178290016&~ ~&7083037950451&~, ~&7083178290016&~ ~&6504095402&~)
        }

        TRAVERSE [[17555155952404031931]] > [[7711904883727328]]#[[15680802033737085648]]
            REPLACE [[7712922269353028]] WITH {
                ~&7712922269353028&~: ~&254501108490678590&~ {
                    ~&5972374&~: tocDelegate
                    required property ~&197102514&~ ~&254539508423767444&~
                    required property ~&197088788&~ ~&214629676161&~
                    ~&214646099849&~: ~&6504391364&~.~&214646099849&~
                    ~&7082729686082&~: ~&7082020628281&~.~&17638761292564792854&~
                    ~&214622605608&~: ~&7082020628281&~.~&8399340017260114793&~

                    readonly property bool ~&254534011279562504&~: ~&12425827111281538095&~(~&214629676161&~)
                    readonly property ~&7083178290016&~ ~&8399923449651343933&~: (~&254539508423767444&~.~&6504167078&~ + 1).~&7713616118928163&~()
                    readonly property ~&7083178290016&~ ~&254528235724402268&~: ~&254539508423767444&~.~&6504095402&~
                    readonly property ~&7083178290016&~ entryPageId: ~&254539508423767444&~.~&7083037950451&~ || ""
                    readonly property ~&197088788&~ ~&214632930081&~: ~&254539508423767444&~.~&214632930081&~ ?? 0
                    readonly property bool isEditing: ~&15225781669996973588&~.~&8399622833342374598&~ && ~&15225781669996973588&~.editingPageId === entryPageId

                    ~&254501558939456351&~ {
                        ~&233721384511543&~.~&6503816592&~: ~&7083038346995&~
                        ~&233721384511543&~.~&8399743405844438450&~: ~&214632930081&~ * 50
                        ~&233721384511543&~.~&499747351624466981&~: ~&7082020628281&~.~&13257341367876254&~
                        ~&233744706647566&~: ~&7082020628281&~.~&8260768964620614264&~

                        ~&3313440495918644137&~ {
                            ~&5972374&~: nameLabel
                            ~&7081629735527&~.~&254529418434902000&~: ~&6504329801&~
                            ~&214622605608&~: ~&7082020628281&~.~&8399340017235344933&~
                            ~&214624865996&~: ~&6503165774&~.~&430968154721198747&~
                            ~&6504315758&~: ~&254528235724402268&~
                            ~&6503823200&~.~&6503679370&~: ~&254534011279562504&~
                            ~&233748328658231&~: !tocDelegate.isEditing

                            ~&254494525842443467&~ {
                                ~&233721384511543&~.~&6503816592&~: ~&7083038346995&~
                                ~&254542236275632405&~: {
                                    ~&15225781669996973588&~.~&13277909919941986047&~(~&254539508423767444&~.~&6504167078&~);
                                }
                                ~&383135108587212173&~: {
                                    ~&5972376&~ (~&15225781669996973588&~.~&8399622833342374598&~ && entryPageId) {
                                        ~&15225781669996973588&~.editingPageId = entryPageId;
                                        nameInput.~&6504315758&~ = ~&254528235724402268&~;
                                        nameInput.~&9186019576827190292&~();
                                        nameInput.~&254547531013807458&~();
                                    }
                                }
                            }
                        }

                        ~&17480428514224686268&~ {
                            ~&5972374&~: nameInput
                            ~&7081629735527&~.~&254529418434902000&~: ~&6504329801&~
                            ~&233748328658231&~: tocDelegate.isEditing
                            ~&6503823200&~.~&254543497768871654&~: ~&7082020628281&~.~&8015843119099583226&~
                            ~&214622605608&~: ~&7082020628281&~.~&8399340017235344933&~
                            ~&551578482712369929&~: 50

                            ~&8399893700003527327&~: {
                                ~&5972376&~ (~&6504315758&~.~&6504329413&~().~&7082886407723&~ > 0) {
                                    ~&15225781669996973588&~.tocRenameEntry(entryPageId, ~&6504315758&~.~&6504329413&~());
                                }
                                ~&15225781669996973588&~.editingPageId = "";
                            }

                            ~&18319773372398057328&~: {
                                ~&5972376&~ (!~&214626153769&~ && tocDelegate.isEditing) {
                                    ~&15225781669996973588&~.editingPageId = "";
                                }
                            }

                            ~&6502842373&~.onEscapePressed: {
                                ~&15225781669996973588&~.editingPageId = "";
                            }
                        }

                        ~&425121728314878811&~.Caption {
                            ~&214622605608&~: ~&7082020628281&~.~&8399340017235344933&~
                            ~&6504315758&~: ~&8399923449651343933&~
                        }

                        ~&425121728314878811&~.~&6502767986&~ {
                            ~&7081629735527&~.~&254522510204479688&~: ~&5971598&~.~&14019785292674113803&~
                            ~&7081629735527&~.~&8399743405844438450&~: ~&7082020628281&~.~&8260768964620614264&~
                            ~&233748328658231&~: ~&15225781669996973588&~.~&8399622833342374598&~
                            ~&7083172477658&~: ~&"8609871989899886756&~
                            ~&6504284228&~: ~&5971598&~.~&6504284228&~(~&7082020628281&~.~&12414259495892754182&~, ~&7082020628281&~.~&12414259495892754182&~)
                            ~&214622605608&~: ~&7082020628281&~.~&8399340017235344933&~

                            ~&254494525842443467&~ {
                                ~&233721384511543&~.~&6503816592&~: ~&7083038346995&~
                                ~&254542236275632405&~: ~&15225781669996973588&~.tocDeleteEntry(entryPageId)
                            }
                        }
                    }

                    ~&254501108490678590&~ {
                        ~&233721384511543&~.~&7082507142622&~: ~&7083038346995&~.~&7082507142622&~
                        ~&233721384511543&~.~&6504027668&~: ~&7083038346995&~.~&6504027668&~
                        ~&233721384511543&~.~&8399743405844438450&~: ~&214632930081&~ * 50
                        ~&233721384511543&~.~&214640173127&~: ~&7083038346995&~.~&214640173127&~
                        ~&7082729686082&~: ~&7082020628281&~.~&495727993356258788&~
                        ~&214622605608&~: ~&7082020628281&~.~&8399340017235344933&~
                    }

                    ~&254494525842443467&~ {
                        ~&233721384511543&~.~&6503816592&~: ~&7083038346995&~
                        ~&233726547792244&~: !~&15225781669996973588&~.~&8399622833342374598&~
                        ~&180995&~: -1
                        ~&254542236275632405&~: ~&15225781669996973588&~.~&13277909919941986047&~(~&254539508423767444&~.~&6504167078&~)
                    }
                }
            }
        END TRAVERSE
    END TRAVERSE
END AFFECT

; Toolbar path
AFFECT [[11313888899523275277]]
    IMPORT [[6504469795.6504031891.7712892662059645]] [[180922.180921]]
    IMPORT [[233700934949963.7082069304737]] [[180923.180921]]
    TRAVERSE [[8397993708429497603]]#[[6504254477]]
        LOCATE BEFORE ALL
        INSERT {
            signal tocShowView()
            signal tocAddEntry(~&7083178290016&~ ~&7083037950451&~)
            signal tocAddCurrentEntry()
        }

        TRAVERSE [[6502786168]]#[[233745975898428]] > [[8398044571386570029]]
            LOCATE BEFORE [[7712155293725601]][.[[8399878573055752961]]=[["3575461827597527778]]]
            INSERT {
                ~&454089850271038938&~ {
                    ~&5972374&~: tocButton
                    ~&233745975898428&~: ~&6504254477&~
                    ~&6504337259&~: ~&454089850271038938&~.~&6503187275&~.~&14888501028015932088&~

                    ~&8399601734642709923&~: ~&"15094524446771854124&~
                    ~&233726547792244&~: ~&6504329801&~
                    ~&233748328658231&~: ~&7712934851008712&~ && ~&7712934851008712&~.~&7713012671454059&~ === ~&7711571060833448&~.~&7711997891205770&~ && ~&6504254477&~.~&7712989577739634&~ &&
                             (~&7081905792137&~.~&214646099849&~ !== 954 ||
                              ~&6504254477&~.~&7713446884515614&~ === ~&8236974744924391272&~.~&7712083094340350&~.~&6502877684&~ ||
                              ~&6504254477&~.~&7713446884515614&~ === ~&8236974744924391272&~.~&7712083094340350&~.~&214602223655&~)
                    ~&214641332312&~: ~&7712934851008712&~ && ~&7712934851008712&~.~&7713012671454059&~ === ~&7711571060833448&~.~&7711997891205770&~ &&
                           (~&7081905792137&~.~&214646099849&~ !== 954 ||
                            ~&6504254477&~.~&7713446884515614&~ === ~&8236974744924391272&~.~&7712083094340350&~.~&6502877684&~ ||
                            ~&6504254477&~.~&7713446884515614&~ === ~&8236974744924391272&~.~&7712083094340350&~.~&214602223655&~)

                    ~&254542253295368380&~: ~&6504254477&~.~&233718999756776&~(tocButton)

                    ~&6144132522167405889&~: ~&14125623155555875541&~ {
                        ~&233744706647566&~: 0

                        ~&425121728314878811&~.~&432643201877711221&~ {
                            ~&214632764553&~: ~&6504222003&~("Add TOC entry at page %1").~&197080195&~(~&477346483278306569&~ + 1)
                            ~&8399601734642709923&~: ~&"5204414324171175596&~
                            ~&254542236275632405&~: {
                                ~&6504254477&~.~&15738511857451076348&~();
                                ~&6504254477&~.tocAddEntry(~&15793094956877902211&~.~&3321486226208410902&~);
                            }
                        }

                        ~&254501108490678590&~ {
                            ~&7081629735527&~.~&254529418434902000&~: ~&6504329801&~
                            ~&7082729686082&~: 1
                            ~&214622605608&~: ~&7082020628281&~.colorMidGray
                        }

                        ~&425121728314878811&~.~&432643201877711221&~ {
                            ~&214632764553&~: ~&6504222003&~("Show Table of Contents")
                            ~&8399601734642709923&~: ~&"15094524446771854124&~
                            ~&254542236275632405&~: {
                                ~&6504254477&~.~&15738511857451076348&~();
                                ~&6504254477&~.tocShowView();
                            }
                        }
                    }
                }
            }
        END TRAVERSE
    END TRAVERSE
END AFFECT

; Paper Pro Move SettingsMenu
AFFECT [[11704595946725378272]]
    IMPORT [[233700934949963.7082069304737]] [[180923.180921]]
    TRAVERSE [[454089850271038938]]#[[6504254477]] > [[254480451320573660]]#[[16710723433319324941]] > [[14125623155555875541]]#[[233724020048228]]
        LOCATE AFTER [[425121728314878811.15740235808997988493]]
        INSERT {
            ~&425121728314878811&~.~&432643201877711221&~ {
                ~&214632764553&~: ~&6504222003&~("Add TOC entry at page %1").~&197080195&~(~&6504254477&~.~&477346483278306569&~ + 1)
                ~&8399601734642709923&~: ~&"5204414324171175596&~
                ~&233748328658231&~: ~&7081905792137&~.~&214646099849&~ === 954 && ~&6504254477&~.~&7713361680718652&~ &&
                         (~&6504254477&~.~&233745975898428&~.~&7713446884515614&~ === ~&8236974744924391272&~.~&7712083094340350&~.~&197065948&~ ||
                          ~&6504254477&~.~&233745975898428&~.~&7713446884515614&~ === ~&8236974744924391272&~.~&7712083094340350&~.~&7081254810046&~)
                ~&254542236275632405&~: {
                    ~&6504254477&~.~&233745975898428&~.~&15738511857451076348&~();
                    ~&6504254477&~.~&233745975898428&~.tocAddCurrentEntry();
                }
            }

            ~&425121728314878811&~.~&432643201877711221&~ {
                ~&214632764553&~: ~&6504222003&~("Show Table of Contents")
                ~&8399601734642709923&~: ~&"15094524446771854124&~
                ~&233748328658231&~: ~&7081905792137&~.~&214646099849&~ === 954 && ~&6504254477&~.~&7713361680718652&~ &&
                         (~&6504254477&~.~&233745975898428&~.~&7713446884515614&~ === ~&8236974744924391272&~.~&7712083094340350&~.~&197065948&~ ||
                          ~&6504254477&~.~&233745975898428&~.~&7713446884515614&~ === ~&8236974744924391272&~.~&7712083094340350&~.~&7081254810046&~)
                ~&254542236275632405&~: {
                    ~&6504254477&~.~&233745975898428&~.~&15738511857451076348&~();
                    ~&6504254477&~.~&233745975898428&~.tocShowView();
                }
            }
        }
    END TRAVERSE
END AFFECT
